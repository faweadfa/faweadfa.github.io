<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Melee Damage Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media (max-width: 600px) {
            .buttons {
                flex-direction: column;
            }

            .buttons button {
                width: 100%;
                margin-top: 10px;
            }

            .container {
                padding: 10px;
            }
        }

        /* Increase the size of the input fields and buttons */
        .inline-input input[type="number"],
        .block input[type="number"] {
            width: 120px;
            padding: 10px;
            font-size: 1.25rem;
        }

        .inline-input input[type="number"].inline-percentage {
            width: 80px;
        }

        .inline-input button {
            margin-left: 10px;
            padding: 10px;
            font-size: 1.25rem;
        }

        .block input[type="text"] {
            font-size: 1.25rem;
            padding: 10px;
        }

        button {
            font-size: 1.25rem;
            padding: 12px 16px;
        }

    </style>
</head>

<body class="bg-gray-100 text-gray-800">

    <h2 class="text-center text-3xl font-bold my-5">Melee Damage Calculator</h2>

    <!-- Top Box (Creature details) -->
    <div class="container mx-auto max-w-md p-6 bg-white rounded-lg shadow-md">

        <!-- Dropdown to select saved creatures and autofill creature details -->
        <label for="savedCreatureSelector" class="block text-sm font-medium text-gray-700">Select a saved creature:</label>
        <select id="savedCreatureSelector" aria-label="Select a saved creature to autofill data" class="block w-full mt-1 mb-3 p-2 border border-gray-300 rounded" onchange="loadSavedCreature()">
            <option value="">Select a creature to autofill</option>
        </select>

        <label for="creatureName" class="block text-sm font-medium text-gray-700">Creature Name:</label>
        <input type="text" id="creatureName" class="block w-full mt-1 mb-3 p-2 border border-gray-300 rounded" placeholder="Enter creature's name" required>

        <!-- Your Damage with Percentage Box -->
        <label for="yourDamage" class="block text-sm font-medium text-gray-700">Your Damage:</label>
        <div class="inline-input">
            <input type="number" id="yourDamage" min="1" class="block w-full mt-1 mb-3 p-2 border border-gray-300 rounded" placeholder="Enter your base damage" required oninput="calculateDamage(); storeInitialValues()">
            <input type="number" id="damagePercentage" min="0" placeholder="%" class="inline-percentage" title="Enter percentage to increase damage" oninput="applyDamagePercentage()">
        </div>

        <!-- Your Weight with Percentage Box -->
        <label for="userWeight" class="block text-sm font-medium text-gray-700">Your Weight:</label>
        <div class="inline-input">
            <input type="number" id="userWeight" min="1" class="block w-full mt-1 mb-3 p-2 border border-gray-300 rounded" placeholder="Enter your weight" required oninput="calculateDamage(); storeInitialValues()">
            <input type="number" id="weightPercentage" min="0" placeholder="%" class="inline-percentage" title="Enter percentage to increase weight" oninput="applyWeightPercentage()">
        </div>

        <div class="buttons flex justify-between mt-4">
            <button class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded" onclick="calculateDamage()">Calculate</button>
            <button class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded" onclick="saveCreature()">Save</button>
            <button class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded" onclick="resetTopBox()">Reset Top Box</button>
        </div>

        <div class="result text-center mt-5 text-xl font-bold">
            Final Damage: <span id="finalDamage">0</span>
        </div>
    </div>

    <!-- Bottom Box (Target details) -->
    <div class="container mx-auto max-w-md mt-5 p-6 bg-white rounded-lg shadow-md">
        <!-- Dropdown to select saved creatures as target -->
        <label for="targetCreature" class="block text-sm font-medium text-gray-700">Choose Target Creature:</label>
        <select id="targetCreature" aria-label="Select a saved creature as target" class="block w-full mt-1 mb-3 p-2 border border-gray-300 rounded" onchange="loadTargetCreature()">
            <option value="">Select a saved creature as target</option>
        </select>

        <label for="sitOrLayMultiplier" class="block text-sm font-medium text-gray-700">Target Sit or Lay Multiplier:</label>
        <select id="sitOrLayMultiplier" aria-label="Select the target's stance multiplier" class="block w-full mt-1 mb-3 p-2 border border-gray-300 rounded" onchange="calculateDamage()">
            <option value="1.25">Laying (1.25)</option>
            <option value="1.12">Sitting (1.12)</option>
            <option value="1.0">Standing (1.0)</option>
        </select>

        <label for="packMultiplier" class="block text-sm font-medium text-gray-700">Pack Multiplier:</label>
        <input type="number" id="packMultiplier" step="0.01" min="1" value="1" class="block w-full mt-1 mb-3 p-2 border border-gray-300 rounded" placeholder="Enter pack multiplier" required oninput="calculateDamage()">

        <label for="targetWeight" class="block text-sm font-medium text-gray-700">Target's Weight:</label>
        <input type="number" id="targetWeight" min="1" class="block w-full mt-1 mb-3 p-2 border border-gray-300 rounded" placeholder="Enter target's weight" required oninput="calculateDamage()">

        <button class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded w-full" onclick="resetBottomBox()">Reset Bottom Box</button>
    </div>

    <div class="container mx-auto max-w-md mt-5 p-6 bg-white rounded-lg shadow-md">
        <h3 class="text-center text-lg font-bold mb-3">Saved Creatures</h3>
        <select id="creatureDropdown" class="block w-full mt-1 mb-3 p-2 border border-gray-300 rounded" onchange="loadCreature()">
            <option value="">Select a creature</option>
        </select>
        <button class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded w-full" onclick="confirmDeletion()">Delete Selected Creature</button>
    </div>

    <script>
        // Initial creatures to be added to the save list if no creatures exist
        const initialCreatures = [
            { name: "Adharcaiin", yourDamage: 250, userWeight: 1250 },
            { name: "Aereis", yourDamage: 260, userWeight: 2300 },
            { name: "Aesho", yourDamage: 180, userWeight: 2800 },
            { name: "Aesmir", yourDamage: 215, userWeight: 6500 },
            { name: "Aholai", yourDamage: 135, userWeight: 2300 },
            { name: "Ahri'Tahmuk", yourDamage: 325, userWeight: 4350 },
            { name: "Aidoneiscus", yourDamage: 400, userWeight: 3400 },
            { name: "Aleicuda", yourDamage: 400, userWeight: 5000 },
            { name: "Alkaksu", yourDamage: 65, userWeight: 800 },
            { name: "Altulis", yourDamage: 155, userWeight: 5000 },
            { name: "Amolis", yourDamage: 210, userWeight: 2700 },
            { name: "Angelic Warden", yourDamage: 65, userWeight: 2250 },
            { name: "Ani", yourDamage: 50, userWeight: 850 },
            { name: "Anutill", yourDamage: 200, userWeight: 3000 },
            { name: "Aolenus", yourDamage: 380, userWeight: 3350 },
            { name: "Apofuex", yourDamage: 75, userWeight: 3000 },
            { name: "Aqoxturumox", yourDamage: 150, userWeight: 22000 },
            { name: "Arachyu", yourDamage: 650, userWeight: 11000 },
            { name: "Archalium", yourDamage: 260, userWeight: 2500 },
            { name: "Archinax", yourDamage: 500, userWeight: 2500 },
            { name: "Ardor Warden", yourDamage: 95, userWeight: 7100 },
            { name: "Arkmetta", yourDamage: 225, userWeight: 5250 },
            { name: "Arrainoa", yourDamage: 400, userWeight: 2800 },
            { name: "Arsonos", yourDamage: 400, userWeight: 5000 },
            { name: "Artikauk", yourDamage: 180, userWeight: 2100 },
            { name: "Asilvestrela", yourDamage: 230, userWeight: 4500 },
            { name: "Astrothi", yourDamage: 85, userWeight: 800 },
            { name: "Athulyth", yourDamage: 175, userWeight: 8500 },
            { name: "Aueko", yourDamage: 100, userWeight: 2000 },
            { name: "Auraron", yourDamage: 350, userWeight: 8000 },
            { name: "Avothius", yourDamage: 320, userWeight: 7500 },
            { name: "Axothan", yourDamage: 375, userWeight: 8750 },
            { name: "Banishii", yourDamage: 200, userWeight: 3850 },
            { name: "Bazelii", yourDamage: 275, userWeight: 3750 },
            { name: "Beezu", yourDamage: 95, userWeight: 1100 },
            { name: "Belluvaraptor", yourDamage: 110, userWeight: 800 },
            { name: "Bengon", yourDamage: 225, userWeight: 3100 },
            { name: "Bolatra", yourDamage: 185, userWeight: 3000 },
            { name: "Boreal Warden", yourDamage: 65, userWeight: 50000 },
            { name: "Borenhir", yourDamage: 220, userWeight: 3800 },
            { name: "Boskurro", yourDamage: 365, userWeight: 5750 },
            { name: "Brequewk", yourDamage: 65, userWeight: 850 },
            { name: "Buff Eulopii", yourDamage: 525, userWeight: 5200 },
            { name: "Buukon", yourDamage: 250, userWeight: 3400 },
            { name: "BÃ¤ruw", yourDamage: 575, userWeight: 6000 },
            { name: "Caldonterrus", yourDamage: 300, userWeight: 50000 },
            { name: "Cantapodi", yourDamage: 120, userWeight: 999 },
            { name: "Cavengauu", yourDamage: 275, userWeight: 5500 },
            { name: "Celeritas", yourDamage: 220, userWeight: 7200 },
            { name: "Cenicara", yourDamage: 200, userWeight: 2350 },
            { name: "Chamei", yourDamage: 220, userWeight: 9000 },
            { name: "Chisudo", yourDamage: 220, userWeight: 2050 },
            { name: "Chrysos", yourDamage: 285, userWeight: 2600 },
            { name: "Cimidstik", yourDamage: 120, userWeight: 1200 },
            { name: "Cimmabu", yourDamage: 50, userWeight: 1650 },
            { name: "Citrulantis", yourDamage: 100, userWeight: 3000 },
            { name: "Clovilowper", yourDamage: 150, userWeight: 3500 },
            { name: "Colval", yourDamage: 150, userWeight: 1150 },
            { name: "Coniferon", yourDamage: 150, userWeight: 4250 },
            { name: "Corsarlett", yourDamage: 230, userWeight: 1900 },
            { name: "Corvurax", yourDamage: 150, userWeight: 3100 },
            { name: "Cottol", yourDamage: 95, userWeight: 1350 },
            { name: "Crata Peretina", yourDamage: 200, userWeight: 7250 },
            { name: "Cryptoth", yourDamage: 300, userWeight: 5500 },
            { name: "Cucuerpum", yourDamage: 225, userWeight: 6000 },
            { name: "Cupuere", yourDamage: 50, userWeight: 3000 },
            { name: "Cuxena", yourDamage: 150, userWeight: 3250 },
            { name: "Dabaemura", yourDamage: 275, userWeight: 2200 },
            { name: "Dalghara", yourDamage: 150, userWeight: 4000 },
            { name: "Dantenos", yourDamage: 265, userWeight: 6000 },
            { name: "Demetyra", yourDamage: 125, userWeight: 3200 },
            { name: "Denjzi", yourDamage: 325, userWeight: 5000 },
            { name: "Dieamarjla", yourDamage: 105, userWeight: 1600 },
            { name: "Diesura", yourDamage: 110, userWeight: 1300 },
            { name: "Diokrine", yourDamage: 145, userWeight: 1500 },
            { name: "Doragonix", yourDamage: 125, userWeight: 1400 },
            { name: "Dowatt", yourDamage: 120, userWeight: 1550 },
            { name: "Dragonixsauria", yourDamage: 100, userWeight: 3500 },
            { name: "Dunklaestus", yourDamage: 450, userWeight: 3500 },
            { name: "Dyaelatura", yourDamage: 250, userWeight: 2200 },
            { name: "Eigion Warden", yourDamage: 70, userWeight: 30000 },
            { name: "Eiroca", yourDamage: 300, userWeight: 5000 },
            { name: "Elarickkeir", yourDamage: 400, userWeight: 6500 },
            { name: "Emphines", yourDamage: 125, userWeight: 1500 },
            { name: "Empiterium", yourDamage: 450, userWeight: 15750 },
            { name: "Equenix", yourDamage: 250, userWeight: 5350 },
            { name: "Erridea", yourDamage: 520, userWeight: 3200 },
            { name: "Eskarlor", yourDamage: 275, userWeight: 3000 }
        ];

        window.onload = function() {
            let savedCreatures = JSON.parse(localStorage.getItem('creatures')) || [];

            // Merge initialCreatures into savedCreatures (without duplicates based on name)
            initialCreatures.forEach(creature => {
                const exists = savedCreatures.find(saved => saved.name === creature.name);
                if (!exists) {
                    savedCreatures.push(creature);
                }
            });

            // Update localStorage with the combined list
            localStorage.setItem('creatures', JSON.stringify(savedCreatures));

            updateCreatureDropdown();
            updateTargetCreatureDropdown();
            updateSavedCreatureSelector();
        };

        // Update the dropdown for selecting creatures to autofill the top form
        function updateSavedCreatureSelector() {
            const savedCreatureSelector = document.getElementById("savedCreatureSelector");
            const savedCreatures = JSON.parse(localStorage.getItem('creatures')) || [];
            savedCreatureSelector.innerHTML = '<option value="">Select a creature to autofill</option>';
            savedCreatures.forEach(creature => {
                const option = document.createElement('option');
                option.value = creature.name; // Use name as value for selection
                option.textContent = creature.name; // Display the creature's name
                savedCreatureSelector.appendChild(option);
            });
        }

        // Update the creature dropdown for target selection
        function updateTargetCreatureDropdown() {
            const targetCreatureDropdown = document.getElementById("targetCreature");
            const savedCreatures = JSON.parse(localStorage.getItem('creatures')) || [];
            targetCreatureDropdown.innerHTML = '<option value="">Select a saved creature as target</option>';
            savedCreatures.forEach(creature => {
                const option = document.createElement('option');
                option.value = creature.name; // Use name as value for selection
                option.textContent = creature.name;
                targetCreatureDropdown.appendChild(option);
            });
        }

        // Update the dropdown for selecting creatures
        function updateCreatureDropdown() {
            const creatureDropdown = document.getElementById("creatureDropdown");
            const savedCreatures = JSON.parse(localStorage.getItem('creatures')) || [];
            creatureDropdown.innerHTML = '<option value="">Select a creature</option>';
            savedCreatures.forEach(creature => {
                const option = document.createElement('option');
                option.value = creature.name;
                option.textContent = creature.name;
                creatureDropdown.appendChild(option);
            });
        }

        // Load the selected creature's details into the top form
        function loadSavedCreature() {
            const savedCreatureSelector = document.getElementById("savedCreatureSelector");
            const creatureName = savedCreatureSelector.value;
            const savedCreatures = JSON.parse(localStorage.getItem('creatures')) || [];
            const selectedCreature = savedCreatures.find(creature => creature.name === creatureName);

            if (selectedCreature) {
                document.getElementById("creatureName").value = selectedCreature.name;
                document.getElementById("yourDamage").value = selectedCreature.yourDamage;
                document.getElementById("userWeight").value = selectedCreature.userWeight;
                calculateDamage();
            }
        }
    </script>

</body>

</html>
